webpackJsonp([16],{XuPp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("O2NY"),r=a.n(s),i={inject:["reload"],data:function(){return{ruleForm:{cdt:""},tableData:[],page:"1",pageSize:"5",total:0,popupAct:!1,form:{name:"",address:""},rules:{name:[{required:!0,message:"请输入广告名称",trigger:"blur"}],address:[{required:!0,message:"请输入广告地址",trigger:"blur"}]},advImg:[{imgName:"one"},{imgName:"two"},{imgName:"three"},{imgName:"fore"},{imgName:"five"}],originAdvId:""}},created:function(){this.teacherList()},methods:{search:function(){var e=this,t=new URLSearchParams;t.append("uid",localStorage.getItem("uid")),t.append("page",this.page),t.append("show_num",this.pageSize),t.append("advertisementName_advertisementUrl",this.ruleForm.cdt),this.$http.post(this.$api.teacherList.teacherList,t,!0).then(function(t){console.log("查询",t),"success"==t.data.state&&0!=t.data.count?(e.total=t.data.count,e.tableData=t.data.getMoneyRechargeVOList):r.a.errPrompt(e.$message({showClose:!0,message:"错了哦，未查询到相应数据！",type:"error"}))})},teacherList:function(){var e=this,t=new URLSearchParams;t.append("uid",localStorage.getItem("uid")),t.append("page",this.page),t.append("show_num",this.pageSize),this.$http.post(this.$api.teacherList.teacherList,t,!0).then(function(t){console.log(t),e.tableData=t.data.getMoneyRechargeVOList,e.total=t.data.count})},handleSizeChange:function(e){this.pageSize=e,this.teacherList()},handleCurrentChange:function(e){this.page=e,this.teacherList()},addAdv:function(){this.form.name="",this.form.address="",this.originAdvId="",this.popupAct=!this.popupAct},del:function(){this.popupAct=!this.popupAct},add:function(){var e=this,t=new URLSearchParams;t.append("uid",localStorage.getItem("uid")),t.append("advertisementName",this.form.name),t.append("advertisementUrl",this.form.address),this.$http.post(this.$api.addAdv.addAdv,t,!0).then(function(t){console.log("广告添加",t),"success"==t.data.state&&(r.a.errPrompt(e.$message({message:"恭喜你，添加广告成功！",type:"success"})),e.form.name="",e.form.address="",e.popupAct=!e.popupAct,e.teacherList())})},removeAdv:function(e){var t=this,a=new URLSearchParams;a.append("aid",e),this.$http.post(this.$api.removeAdv.removeAdv,a,!0).then(function(e){console.log(e),"success"==e.data.state?(r.a.errPrompt(t.$message({message:"恭喜你，删除广告成功！",type:"success"})),t.teacherList()):r.a.errPrompt(t.$message({showClose:!0,message:"删除失败，该广告正在使用中！",type:"error"}))})},originAdv:function(e){var t=this;this.popupAct=!this.popupAct,this.originAdvId=e;var a=new URLSearchParams;a.append("aid",e),this.$http.post(this.$api.originAdv.originAdv,a,!0).then(function(e){t.form.name=e.data.getAdvertisementVO.advertisementName,t.form.address=e.data.getAdvertisementVO.advertisementUrl})},editorAdv:function(){var e=this,t=new URLSearchParams;t.append("uid",localStorage.getItem("uid")),t.append("advertisementName",this.form.name),t.append("advertisementUrl",this.form.name),t.append("id",this.originAdvId),this.$http.post(this.$api.editorAdv.editorAdv,t,!0).then(function(t){"success"==t.data.state?(e.form.name="",e.form.address="",e.popupAct=!e.popupAct,e.teacherList(),r.a.errPrompt(e.$message({message:"恭喜你，编辑广告成功！",type:"success"}))):r.a.errPrompt(e.$message({showClose:!0,message:"编辑广告失败！",type:"error"}))})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"teacher"},[a("el-card",{staticClass:"search"},[a("el-form",{attrs:{model:e.ruleForm}},[a("el-input",{staticClass:"search-item",attrs:{placeholder:"请输入广告名称|广告链接"},model:{value:e.ruleForm.cdt,callback:function(t){e.$set(e.ruleForm,"cdt",t)},expression:"ruleForm.cdt"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1),e._v(" "),a("el-card",{staticClass:"teacher-list"},[a("div",{staticClass:"card-head",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[e._v("获客广告")]),e._v(" "),a("el-button",{on:{click:e.addAdv}},[e._v("+ 添加广告")])],1),e._v(" "),a("div",{staticClass:"list"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"70",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"advertisementName",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"advertisementUrl",label:"链接"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){return e.originAdv(t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.removeAdv(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"page-sizes":[5,10],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),e.popupAct?a("div",{staticClass:"popup-bag"},[a("div",{staticClass:"popup"},[a("div",{staticClass:"popup-head"},[e._v("\n        获客大师\n        "),a("div",{staticClass:"delete"},[a("i",{staticClass:"el-icon-close",on:{click:e.addAdv}})])]),e._v(" "),a("div",{staticClass:"popup-content"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("div",{staticClass:"top"},[a("div",{staticClass:"leftTxt"},[a("div",{staticClass:"advertising-title"},[a("el-form-item",{attrs:{label:"活动名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入广告名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),a("div",{staticClass:"advertising-address"},[a("el-form-item",{attrs:{label:"广告地址",prop:"address"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入广告地址"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1)]),e._v(" "),a("div",{staticClass:"rightAdv"},[a("el-carousel",{attrs:{height:"440px"}},e._l(e.advImg,function(e,t){return a("el-carousel-item",{key:t},[a("img",{attrs:{src:"../../static/images/"+e.imgName+".png",alt:""}})])}),1)],1)]),e._v(" "),a("div",{staticClass:"bottom"},[a("el-form-item",[a("el-button",{on:{click:e.del}},[e._v("取消")]),e._v(" "),""==e.originAdvId?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("form")}}},[e._v("新增")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editorAdv("form")}}},[e._v("修改")])],1)],1)])],1)])]):e._e()],1)},staticRenderFns:[]};var n=a("C7Lr")(i,o,!1,function(e){a("fVX0")},"data-v-8fd10632",null);t.default=n.exports},fVX0:function(e,t){}});
//# sourceMappingURL=16.86f72bec3473f35a4021.js.map