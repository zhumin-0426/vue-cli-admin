{"version":3,"sources":["webpack:///src/components/act/Addcard.vue","webpack:///./src/components/act/Addcard.vue?ca39","webpack:///./src/components/act/Addcard.vue"],"names":["Addcard","data","picurl","isActive","ruleForm","busName","cardPicUrl","ruleFormRouls","required","message","trigger","carMsgFrom","cardName","cardBagColor","actTime","state","del","serverPhone","share","type","cardBagSel","color","label","busType","carMsgFromRules","created","this","busTypeFun","methods","handleFileChange","_this","inputDOM","$refs","inputer","file","files","Math","floor","size","formData","FormData","append","localStorage","getItem","$http","post","$api","cardPic","then","result","url","delPic","cardBusMsg","formName","_this2","validate","valid","console","log","_this3","params","URLSearchParams","busTypeUrl","getcardBusinessServiceTypesVOList","cardMsgForm","_this4","shareTxt","startTime","moment","format","endTime","addCard","events_default","a","errPrompt","$message","$router","push","path","prevStep","act_Addcard","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","margin-top","attrs","active","finish-status","simple","title","_v","ref","model","rules","prop","placeholder","value","callback","$$v","$set","expression","padding-left","margin-bottom","line-height","name","on","change","$event","click","src","label-width","_l","item","index","key","style","range-separator","start-placeholder","end-placeholder","businessServiceTypesName","id","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/24.34b7c779c9d8d245f92d.js","sourcesContent":["<template>\n  <div class=\"addcard\">\n    <el-card class=\"addcard-card\">\n      <el-steps\n        class=\"step-line\"\n        :active=\"isActive\"\n        finish-status=\"success\"\n        simple\n        style=\"margin-top: 20px\"\n      >\n        <el-step title=\"卡劵商户信息\"></el-step>\n        <el-step title=\"卡劵基础信息\"></el-step>\n      </el-steps>\n      <!-- 卡劵商户信息 -->\n      <div class=\"main\" v-if=\"isActive==1\">\n        <el-form :model=\"ruleForm\" ref=\"ruleForm\" :rules=\"ruleFormRouls\">\n          <el-form-item prop=\"busName\">\n            <el-input class=\"busName\" v-model=\"ruleForm.busName\" placeholder=\"请输入商户名称\"></el-input>\n          </el-form-item>\n          <el-form-item prop=\"cardPicUrl\">\n            <div\n              class=\"prompt\"\n              style=\"padding-left:0px;margin-top:10px;margin-bottom:26px;line-height:0\"\n            >注：商户名称字数上限为12个汉字，该字段提交后不可更改。</div>\n            <div class=\"cardPic\">\n              <div class=\"warpper\" v-if=\"ruleForm.cardPicUrl==''\">\n                <i class=\"el-icon-plus\"></i>\n                <input type=\"file\" name=\"sharePic\" @change=\"handleFileChange($event)\" ref=\"inputer\" />\n              </div>\n              <div class=\"warpper\" v-else>\n                <div class=\"cover\">\n                  <i class=\"el-icon-delete\" @click=\"delPic\"></i>\n                </div>\n                <img :src=\"picurl+ruleForm.cardPicUrl\" />\n              </div>\n            </div>\n          </el-form-item>\n          <div\n            class=\"prompt\"\n            style=\"padding-left:0px\"\n          >注：商户logo建议像素为300*300，大小不能超过1M，图片格式只能为JPG 或 PNG。</div>\n          <el-button type=\"primary\" @click=\"cardBusMsg('ruleForm')\">下一步</el-button>\n        </el-form>\n      </div>\n      <!-- 卡劵基础信息 -->\n      <div class=\"main-one\" v-else>\n        <el-form :model=\"carMsgFrom\" :rules=\"carMsgFromRules\" ref=\"carMsgFrom\" label-width=\"250px\">\n          <el-form-item label=\"卡劵名称\" prop=\"cardName\">\n            <el-input v-model=\"carMsgFrom.cardName\" placeholder=\"字数上线为9个汉字\"></el-input>\n          </el-form-item>\n          <div class=\"prompt\">注：商户logo建议像素为300*300，大小不能超过1M，图片格式只能为JPG 或 PNG。</div>\n          <el-form-item label=\"卡劵背景颜色\" prop=\"cardBagColor\">\n            <el-select v-model=\"carMsgFrom.cardBagColor\" placeholder=\"请选择code码形式\">\n              <el-option\n                v-for=\"(item,index) in cardBagSel\"\n                :key=\"index\"\n                :label=\"item.color\"\n                :value=\"item.color\"\n                :style=\"'background:'+item.color+';color:#fff;text-align: center;'\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"使用时间\" required prop=\"actTime\">\n            <el-date-picker\n              v-model=\"carMsgFrom.actTime\"\n              type=\"datetimerange\"\n              range-separator=\"-\"\n              start-placeholder=\"开始日期\"\n              end-placeholder=\"结束日期\"\n            ></el-date-picker>\n          </el-form-item>\n          <el-form-item label=\"卡劵使用说明\" prop=\"state\">\n            <el-input type=\"textarea\" v-model=\"carMsgFrom.state\" placeholder=\"字数上线为1024个汉字\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"优惠详情\" prop=\"del\">\n            <el-input type=\"textarea\" v-model=\"carMsgFrom.del\" placeholder=\"字数上线为500个汉字\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"客服电话\" prop=\"serverPhone\">\n            <el-input v-model=\"carMsgFrom.serverPhone\" placeholder=\"最多25个字符\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"与其他优惠共享\">\n            <el-switch v-model=\"carMsgFrom.share\"></el-switch>\n          </el-form-item>\n          <div class=\"prompt\">注：默认打开，系统在使用须知里 拼写“可与其他优惠共享”。关闭时系统将在使用须知里 拼写“不可与其他优惠共享”。</div>\n          <el-form-item label=\"商家服务类型\">\n            <el-select v-model=\"carMsgFrom.type\" placeholder=\"请选择商家服务类型\">\n              <el-option\n                v-for=\"(item,index) in busType\"\n                :key=\"index\"\n                :label=\"item.businessServiceTypesName\"\n                :value=\"item.id\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-button @click=\"prevStep\">上一步</el-button>\n            <el-button type=\"primary\" @click=\"cardMsgForm('carMsgFrom')\">提交</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport Events from \"../../common/js/events\";\nexport default {\n  data() {\n    return {\n      picurl: \"http://lb3.28888753.cn/imges/\",\n      isActive: 1,\n      // 第一步\n      ruleForm: {\n        busName: \"\",\n        cardPicUrl: \"\",\n      },\n      ruleFormRouls: {\n        busName: [\n          { required: true, message: \"请填写商户名称\", trigger: \"blur\" },\n        ],\n        cardPicUrl: [\n          { required: true, message: \"请上传图片\", trigger: \"blur\" },\n        ],\n      },\n      // 第二步\n      carMsgFrom: {\n        cardName: \"\",\n        cardBagColor: \"\",\n        actTime: [\n          // new Date(2000, 10, 10, 10, 10),\n          // new Date(2000, 10, 11, 10, 10),\n        ],\n        state: \"\",\n        del: \"\",\n        serverPhone: \"\",\n        share: \"1\",\n        type: \"\",\n      },\n      cardBagSel: [\n        {\n          color: \"#63b359\",\n          label: \"1\",\n        },\n        {\n          color: \"#2c9f67\",\n          label: \"2\",\n        },\n        {\n          color: \"#509fc9\",\n          label: \"3\",\n        },\n        {\n          color: \"#5885cf\",\n          label: \"4\",\n        },\n        {\n          color: \"#9062c0\",\n          label: \"5\",\n        },\n        {\n          color: \"#d09a45\",\n          label: \"6\",\n        },\n        {\n          color: \"#e4b138\",\n          label: \"7\",\n        },\n        {\n          color: \"#ee903c\",\n          label: \"8\",\n        },\n        {\n          color: \"#f08500\",\n          label: \"9\",\n        },\n        {\n          color: \"#a9d92d\",\n          label: \"10\",\n        },\n        {\n          color: \"#dd6549\",\n          label: \"11\",\n        },\n        {\n          color: \"#cc463d\",\n          label: \"12\",\n        },\n        {\n          color: \"#cf3e36\",\n          label: \"13\",\n        },\n        {\n          color: \"#516671\",\n          label: \"14\",\n        },\n      ],\n      busType: [],\n      carMsgFromRules: {\n        cardName: [\n          { required: true, message: \"请输入卡劵名称\", trigger: \"blur\" },\n        ],\n        cardBagColor: [\n          { required: true, message: \"请选择卡劵背景颜色\", trigger: \"blur\" },\n        ],\n        actTime: [\n          { required: true, message: \"请选择使用时间\", trigger: \"blur\" },\n        ],\n        state: [\n          { required: true, message: \"请填写卡券使用说明\", trigger: \"blur\" },\n        ],\n        del: [{ required: true, message: \"请填写优惠详情\", trigger: \"blur\" }],\n        serverPhone: [\n          { required: true, message: \"请输入正确的客服电话\", trigger: \"blur\" },\n        ],\n      },\n    };\n  },\n  created() {\n    this.busTypeFun();\n  },\n  methods: {\n    // 本地上传\n    handleFileChange: function () {\n      let inputDOM = this.$refs.inputer;\n      this.file = inputDOM.files[0]; // 通过DOM取文件数据\n      let size = Math.floor(this.file.size / 1024); //计算文件的大小\n      this.formData = new FormData(); //new一个formData事件\n      this.formData.append(\"file\", this.file); //将file属性添加到formData里\n      this.formData.append(\"uid\", localStorage.getItem(\"uid\"));\n      this.$http\n        .post(this.$api.cardPic.cardPic, this.formData, true)\n        .then((result) => {\n          this.ruleForm.cardPicUrl = result.data.url;\n        });\n    },\n    delPic: function () {\n      this.ruleForm.cardPicUrl = \"\";\n    },\n    cardBusMsg: function (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.isActive += 1;\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    // 商家服务类型\n    busTypeFun: function () {\n      const params = new URLSearchParams();\n      params.append(\"uid\", localStorage.getItem(\"uid\"));\n      this.$http\n        .post(this.$api.busTypeUrl.busTypeUrl, params, true)\n        .then((result) => {\n          console.log(\"卡劵商家服务类型集合\", result);\n          if (result.data.state == \"success\") {\n            this.busType = result.data.getcardBusinessServiceTypesVOList;\n          }\n        });\n    },\n    // form提交\n    cardMsgForm: function (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          let shareTxt = \"2\";\n          var startTime = this.moment(this.carMsgFrom.actTime[0]).format(\n            \"YYYY-MM-DD HH:mm:ss\"\n          );\n          var endTime = this.moment(this.carMsgFrom.actTime[0]).format(\n            \"YYYY-MM-DD HH:mm:ss\"\n          );\n          console.log(\"this.ruleForm.busName\", this.ruleForm.busName);\n          const params = new URLSearchParams();\n          params.append(\"uid\", localStorage.getItem(\"uid\"));\n          params.append(\"businessName\", this.ruleForm.busName);\n          params.append(\"images\", this.ruleForm.cardPicUrl);\n          params.append(\"cardName\", this.carMsgFrom.cardName);\n          params.append(\"cardBackgroundColor\", this.carMsgFrom.cardBagColor);\n          params.append(\"startingTime\", startTime);\n          params.append(\"endTime\", endTime);\n          params.append(\"cardInstructions\", this.carMsgFrom.state);\n          params.append(\"offerDetails\", this.carMsgFrom.del);\n          params.append(\"customerServicePhone\", this.carMsgFrom.serverPhone);\n          if (this.ruleForm.share) {\n            shareTxt = \"1\";\n          } else {\n            shareTxt = \"2\";\n          }\n          params.append(\"share\", shareTxt);\n\n          params.append(\"businessServiceTypes\", this.carMsgFrom.type);\n          this.$http\n            .post(this.$api.addCard.addCard, params, true)\n            .then((result) => {\n              console.log(\"添加卡劵第二步\", result);\n              if (result.data.state == \"success\") {\n                Events.errPrompt(\n                  this.$message({\n                    message: \"恭喜你，添加卡劵成功\",\n                    type: \"success\",\n                  })\n                );\n              }\n              this.$router.push({\n                path: \"/act/card\",\n              });\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n    prevStep: function () {\n      this.isActive -= 1;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.main {\n  text-align: center;\n  margin-top: 20px;\n}\n.el-input,\n.el-input-number {\n  width: 300px;\n}\n.main .el-input__inner {\n  text-align: center;\n  border: none;\n  border-bottom: 1px solid #dcdfe6;\n}\n.main .cardPic {\n  width: 180px;\n  height: 180px;\n  margin: 0 auto;\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  text-align: center;\n  line-height: 180px;\n  font-size: 30px;\n  color: #999;\n}\n.cardPic .warpper .cover {\n  display: none;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 1;\n  color: #fff;\n}\n.cardPic .warpper img {\n  width: 100%;\n  height: 100%;\n}\n.main .cardPic:hover {\n  border: 1px dashed #409eff;\n}\n.main .cardPic:hover .cover {\n  display: block;\n}\n.main .cardPic input {\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n}\n.main-one {\n  margin-top: 20px;\n}\n/* 图片上传 */\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/act/Addcard.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"addcard\"},[_c('el-card',{staticClass:\"addcard-card\"},[_c('el-steps',{staticClass:\"step-line\",staticStyle:{\"margin-top\":\"20px\"},attrs:{\"active\":_vm.isActive,\"finish-status\":\"success\",\"simple\":\"\"}},[_c('el-step',{attrs:{\"title\":\"卡劵商户信息\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"卡劵基础信息\"}})],1),_vm._v(\" \"),(_vm.isActive==1)?_c('div',{staticClass:\"main\"},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.ruleFormRouls}},[_c('el-form-item',{attrs:{\"prop\":\"busName\"}},[_c('el-input',{staticClass:\"busName\",attrs:{\"placeholder\":\"请输入商户名称\"},model:{value:(_vm.ruleForm.busName),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"busName\", $$v)},expression:\"ruleForm.busName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"cardPicUrl\"}},[_c('div',{staticClass:\"prompt\",staticStyle:{\"padding-left\":\"0px\",\"margin-top\":\"10px\",\"margin-bottom\":\"26px\",\"line-height\":\"0\"}},[_vm._v(\"注：商户名称字数上限为12个汉字，该字段提交后不可更改。\")]),_vm._v(\" \"),_c('div',{staticClass:\"cardPic\"},[(_vm.ruleForm.cardPicUrl=='')?_c('div',{staticClass:\"warpper\"},[_c('i',{staticClass:\"el-icon-plus\"}),_vm._v(\" \"),_c('input',{ref:\"inputer\",attrs:{\"type\":\"file\",\"name\":\"sharePic\"},on:{\"change\":function($event){return _vm.handleFileChange($event)}}})]):_c('div',{staticClass:\"warpper\"},[_c('div',{staticClass:\"cover\"},[_c('i',{staticClass:\"el-icon-delete\",on:{\"click\":_vm.delPic}})]),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.picurl+_vm.ruleForm.cardPicUrl}})])])]),_vm._v(\" \"),_c('div',{staticClass:\"prompt\",staticStyle:{\"padding-left\":\"0px\"}},[_vm._v(\"注：商户logo建议像素为300*300，大小不能超过1M，图片格式只能为JPG 或 PNG。\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.cardBusMsg('ruleForm')}}},[_vm._v(\"下一步\")])],1)],1):_c('div',{staticClass:\"main-one\"},[_c('el-form',{ref:\"carMsgFrom\",attrs:{\"model\":_vm.carMsgFrom,\"rules\":_vm.carMsgFromRules,\"label-width\":\"250px\"}},[_c('el-form-item',{attrs:{\"label\":\"卡劵名称\",\"prop\":\"cardName\"}},[_c('el-input',{attrs:{\"placeholder\":\"字数上线为9个汉字\"},model:{value:(_vm.carMsgFrom.cardName),callback:function ($$v) {_vm.$set(_vm.carMsgFrom, \"cardName\", $$v)},expression:\"carMsgFrom.cardName\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"prompt\"},[_vm._v(\"注：商户logo建议像素为300*300，大小不能超过1M，图片格式只能为JPG 或 PNG。\")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"卡劵背景颜色\",\"prop\":\"cardBagColor\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择code码形式\"},model:{value:(_vm.carMsgFrom.cardBagColor),callback:function ($$v) {_vm.$set(_vm.carMsgFrom, \"cardBagColor\", $$v)},expression:\"carMsgFrom.cardBagColor\"}},_vm._l((_vm.cardBagSel),function(item,index){return _c('el-option',{key:index,style:('background:'+item.color+';color:#fff;text-align: center;'),attrs:{\"label\":item.color,\"value\":item.color}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"使用时间\",\"required\":\"\",\"prop\":\"actTime\"}},[_c('el-date-picker',{attrs:{\"type\":\"datetimerange\",\"range-separator\":\"-\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(_vm.carMsgFrom.actTime),callback:function ($$v) {_vm.$set(_vm.carMsgFrom, \"actTime\", $$v)},expression:\"carMsgFrom.actTime\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"卡劵使用说明\",\"prop\":\"state\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"字数上线为1024个汉字\"},model:{value:(_vm.carMsgFrom.state),callback:function ($$v) {_vm.$set(_vm.carMsgFrom, \"state\", $$v)},expression:\"carMsgFrom.state\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"优惠详情\",\"prop\":\"del\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"字数上线为500个汉字\"},model:{value:(_vm.carMsgFrom.del),callback:function ($$v) {_vm.$set(_vm.carMsgFrom, \"del\", $$v)},expression:\"carMsgFrom.del\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"客服电话\",\"prop\":\"serverPhone\"}},[_c('el-input',{attrs:{\"placeholder\":\"最多25个字符\"},model:{value:(_vm.carMsgFrom.serverPhone),callback:function ($$v) {_vm.$set(_vm.carMsgFrom, \"serverPhone\", $$v)},expression:\"carMsgFrom.serverPhone\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"与其他优惠共享\"}},[_c('el-switch',{model:{value:(_vm.carMsgFrom.share),callback:function ($$v) {_vm.$set(_vm.carMsgFrom, \"share\", $$v)},expression:\"carMsgFrom.share\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"prompt\"},[_vm._v(\"注：默认打开，系统在使用须知里 拼写“可与其他优惠共享”。关闭时系统将在使用须知里 拼写“不可与其他优惠共享”。\")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商家服务类型\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择商家服务类型\"},model:{value:(_vm.carMsgFrom.type),callback:function ($$v) {_vm.$set(_vm.carMsgFrom, \"type\", $$v)},expression:\"carMsgFrom.type\"}},_vm._l((_vm.busType),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.businessServiceTypesName,\"value\":item.id}})}),1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{on:{\"click\":_vm.prevStep}},[_vm._v(\"上一步\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.cardMsgForm('carMsgFrom')}}},[_vm._v(\"提交\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-5fcff248\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/act/Addcard.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5fcff248\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./Addcard.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Addcard.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Addcard.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5fcff248\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Addcard.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5fcff248\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/act/Addcard.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}