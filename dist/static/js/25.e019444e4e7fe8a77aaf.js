webpackJsonp([25],{"53vE":function(t,e){},h0mA:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"deliverySetting",components:{},props:{},data:function(){return{checkList:[],checkedCities:"",levelOne:"",distributorsInfo:[],ischeckAll:!1,setDistributorDailog:!1,indeterminate:!1}},created:function(){this.pmsAll(),this.initial()},methods:{initial:function(){},pmsAll:function(){var t=this,e=this.$route.query.id,i=new URLSearchParams;i.append("ids",e),this.$http.post(this.$api.poalDel.poalDel,i,!0).then(function(e){console.log("权限集合",e),t.distributorsInfo=e.data.getRolePermissionVOList;for(var i=0;i<e.data.getRole_yi_xuan_VOList.length;i++)t.checkList.push(e.data.getRole_yi_xuan_VOList[i].id)})},changePms:function(){var t=this,e=this.$route.query.id,i=new URLSearchParams;i.append("ids",e),i.append("idList",this.checkList.join()),this.$http.post(this.$api.changePms.changePms,i,!0).then(function(e){console.log("修改权限",e),t.successMsg(),t.$router.push({path:"/pms/poal"})})},successMsg:function(){this.$message({message:"恭喜你，修改权限成功",type:"success"})},handleCheckAllChange:function(t){if(this.ischeckAll=t,1==t){this.indeterminate=!1;for(var e=0,i=this.distributorsInfo.length;e<i;e++){this.distributorsInfo[e].selected=t;for(var s=0,n=this.distributorsInfo[e].rolePermissionVOList.length;s<n;s++)this.distributorsInfo[e].rolePermissionVOList[s].selected=t}}else{this.indeterminate=!1;for(e=0,i=this.distributorsInfo.length;e<i;e++){this.distributorsInfo[e].selected=t;for(s=0,n=this.distributorsInfo[e].rolePermissionVOList.length;s<n;s++)this.distributorsInfo[e].rolePermissionVOList[s].selected=t}}},handleCheckedCountryAllChange:function(t,e,i){console.log("b"),this.distributorsInfo[t].selected=i,0==i&&(this.distributorsInfo[t].indeterminate=!1);var s=this.distributorsInfo[t].rolePermissionVOList;if(s)for(var n=0,r=s.length;n<r;n++)s[n].selected=i;this.getIsCheckAll()},handleCheckedCountryChange:function(t,e,i,s){console.log("a");for(var n=this.distributorsInfo[t].rolePermissionVOList,r=0,o=0,l=n.length,a=0;a<l;a++)e==n[a].id&&(n[a].selected=s),1==n[a].selected&&r++,0==n[a].selected&&o++;r==l?(this.distributorsInfo[t].selected=!0,this.distributorsInfo[t].indeterminate=!1):o==l?(this.distributorsInfo[t].selected=!1,this.distributorsInfo[t].indeterminate=!1):(this.distributorsInfo[t].selected=!1,this.distributorsInfo[t].indeterminate=!0),this.getIsCheckAll()},getIsCheckAll:function(){for(var t=0,e=0,i=this.distributorsInfo.length,s=0;s<i;s++)1==this.distributorsInfo[s].selected&&t++,0==this.distributorsInfo[s].selected&&e++;t==i?(this.ischeckAll=!0,this.indeterminate=!1):e==i?(this.ischeckAll=!1,this.indeterminate=!1):(this.ischeckAll=!1,this.indeterminate=!0)}},watch:{}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"deliverySetting"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"},attrs:{slot:"header"},slot:"header"},[i("span",[t._v("权限修改")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.changePms}},[t._v("立即修改")])],1),t._v(" "),i("div",{staticClass:"deliverySetting-table"},[i("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.distributorsInfo,function(e,s){return i("div",{key:s,staticClass:"table-body"},[i("div",{staticClass:"selection"},[i("el-checkbox",{key:s,attrs:{label:e.id},on:{change:function(i){return t.handleCheckedCountryAllChange(s,e.partitionId,i)}}},[t._v(t._s(e.permissionName))])],1),t._v(" "),i("div",{staticClass:"width185"},[i("p",[t._v(t._s(e.permissionName))])]),t._v(" "),i("div",{staticClass:"width265"},t._l(e.rolePermissionVOList,function(n,r){return i("el-checkbox",{key:r,attrs:{label:n.id},on:{change:function(i){return t.handleCheckedCountryChange(s,n.id,e.partitionId,i)}}},[t._v(t._s(n.permissionName))])}),1)])}),0)],1)])],1)},staticRenderFns:[]};var r=i("C7Lr")(s,n,!1,function(t){i("53vE")},"data-v-59885744",null);e.default=r.exports}});
//# sourceMappingURL=25.e019444e4e7fe8a77aaf.js.map