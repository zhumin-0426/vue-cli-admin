{"version":3,"sources":["webpack:///src/components/pms/poalDel.vue","webpack:///./src/components/pms/poalDel.vue?2abb","webpack:///./src/components/pms/poalDel.vue"],"names":["poalDel","name","components","props","data","checkList","checkedCities","levelOne","distributorsInfo","ischeckAll","setDistributorDailog","indeterminate","created","this","pmsAll","initial","methods","_this","id","$route","query","params","URLSearchParams","append","$http","post","$api","then","result","console","log","getRolePermissionVOList","i","getRole_yi_xuan_VOList","length","push","changePms","_this2","join","successMsg","$router","path","$message","message","type","handleCheckAllChange","e","len","selected","j","len1","rolePermissionVOList","handleCheckedCountryAllChange","index","topId","childrenArray","getIsCheckAll","handleCheckedCountryChange","topIndex","sonId","tickCount","unTickCount","ArrLength","watch","pms_poalDel","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","display","align-items","justify-content","attrs","slot","_v","on","click","model","value","callback","$$v","expression","_l","partition","partitionIndex","key","label","change","$event","partitionId","_s","permissionName","country","countryIdx","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/25.e019444e4e7fe8a77aaf.js","sourcesContent":["<template>\n  <div class=\"deliverySetting\">\n    <el-card class=\"box-card\">\n      <div\n        slot=\"header\"\n        class=\"clearfix\"\n        style=\"display: flex;align-items: center;justify-content: space-between;\"\n      >\n        <span>权限修改</span>\n        <el-button type=\"primary\" @click=\"changePms\">立即修改</el-button>\n      </div>\n      <div class=\"deliverySetting-table\">\n        <el-checkbox-group v-model=\"checkList\">\n          <div\n            class=\"table-body\"\n            v-for=\"(partition,partitionIndex) in distributorsInfo\"\n            :key=\"partitionIndex\"\n          >\n            <div class=\"selection\">\n              <el-checkbox\n                :label=\"partition.id\"\n                @change=\"handleCheckedCountryAllChange(partitionIndex,partition.partitionId,$event)\"\n                :key=\"partitionIndex\"\n              >{{ partition.permissionName }}</el-checkbox>\n            </div>\n            <div class=\"width185\">\n              <p>{{ partition.permissionName }}</p>\n            </div>\n            <!-- 二级 -->\n            <div class=\"width265\">\n              <el-checkbox\n                v-for=\"(country,countryIdx) in partition.rolePermissionVOList\"\n                :key=\"countryIdx\"\n                @change=\"handleCheckedCountryChange(partitionIndex,country.id,partition.partitionId,$event)\"\n                :label=\"country.id\"\n              >{{country.permissionName}}</el-checkbox>\n            </div>\n          </div>\n        </el-checkbox-group>\n      </div>\n    </el-card>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"deliverySetting\",\n  components: {},\n  props: {},\n  data() {\n    return {\n      checkList: [],\n      checkedCities: \"\",\n      levelOne: \"\",\n      distributorsInfo: [],\n      ischeckAll: false, //一级全选状态\n      setDistributorDailog: false,\n      indeterminate: false,\n    };\n  },\n  created() {\n    this.pmsAll();\n    // 初始化权限\n    this.initial();\n  },\n  methods: {\n    initial() {},\n    // 权限集合\n    pmsAll() {\n      var id = this.$route.query.id;\n      const params = new URLSearchParams();\n      params.append(\"ids\", id);\n      this.$http\n        .post(this.$api.poalDel.poalDel, params, true)\n        .then((result) => {\n          console.log(\"权限集合\", result);\n          this.distributorsInfo = result.data.getRolePermissionVOList;\n          for (let i = 0; i < result.data.getRole_yi_xuan_VOList.length; i++) {\n            this.checkList.push(result.data.getRole_yi_xuan_VOList[i].id);\n          }\n        });\n    },\n    // 修改权限\n    changePms: function () {\n      var id = this.$route.query.id;\n      const params = new URLSearchParams();\n      params.append(\"ids\", id);\n      params.append(\"idList\", this.checkList.join());\n      this.$http\n        .post(this.$api.changePms.changePms, params, true)\n        .then((result) => {\n          console.log(\"修改权限\", result);\n          this.successMsg();\n          this.$router.push({\n            path: \"/pms/poal\",\n          });\n        });\n    },\n    successMsg() {\n      this.$message({\n        message: \"恭喜你，修改权限成功\",\n        type: \"success\",\n      });\n    },\n    handleCheckAllChange(e) {\n      //一级change事件\n      this.ischeckAll = e;\n      if (e == true) {\n        this.indeterminate = false;\n        for (var i = 0, len = this.distributorsInfo.length; i < len; i++) {\n          //二级全选反选不确定\n          this.distributorsInfo[i].selected = e;\n          for (\n            var j = 0,\n              len1 = this.distributorsInfo[i].rolePermissionVOList.length;\n            j < len1;\n            j++\n          ) {\n            this.distributorsInfo[i].rolePermissionVOList[j].selected = e;\n          }\n        }\n      } else {\n        this.indeterminate = false;\n        for (var i = 0, len = this.distributorsInfo.length; i < len; i++) {\n          //三级全选反选不确定\n          this.distributorsInfo[i].selected = e;\n          for (\n            var j = 0,\n              len1 = this.distributorsInfo[i].rolePermissionVOList.length;\n            j < len1;\n            j++\n          ) {\n            this.distributorsInfo[i].rolePermissionVOList[j].selected = e;\n          }\n        }\n      }\n    },\n    handleCheckedCountryAllChange(index, topId, e) {\n      console.log(\"b\");\n      //二级change事件\n      this.distributorsInfo[index].selected = e; //二级勾选后，子级全部勾选或者取消\n      if (e == false) this.distributorsInfo[index].indeterminate = false; //去掉二级不确定状态\n      var childrenArray = this.distributorsInfo[index].rolePermissionVOList;\n      if (childrenArray)\n        for (var i = 0, len = childrenArray.length; i < len; i++)\n          childrenArray[i].selected = e;\n\n      this.getIsCheckAll();\n    },\n    handleCheckedCountryChange(topIndex, sonId, topId, e) {\n      console.log(\"a\");\n      //三级change事件\n      var childrenArray = this.distributorsInfo[topIndex].rolePermissionVOList;\n      var tickCount = 0,\n        unTickCount = 0,\n        len = childrenArray.length;\n      for (var i = 0; i < len; i++) {\n        if (sonId == childrenArray[i].id) childrenArray[i].selected = e;\n        if (childrenArray[i].selected == true) tickCount++;\n        if (childrenArray[i].selected == false) unTickCount++;\n      }\n      if (tickCount == len) {\n        //三级级全勾选\n        this.distributorsInfo[topIndex].selected = true;\n        this.distributorsInfo[topIndex].indeterminate = false;\n      } else if (unTickCount == len) {\n        //三级级全不勾选\n        this.distributorsInfo[topIndex].selected = false;\n        this.distributorsInfo[topIndex].indeterminate = false;\n      } else {\n        this.distributorsInfo[topIndex].selected = false;\n        this.distributorsInfo[topIndex].indeterminate = true; //添加二级不确定状态\n      }\n\n      this.getIsCheckAll();\n    },\n    getIsCheckAll() {\n      var tickCount = 0,\n        unTickCount = 0,\n        ArrLength = this.distributorsInfo.length;\n      for (var j = 0; j < ArrLength; j++) {\n        //全选checkbox状态\n        if (this.distributorsInfo[j].selected == true) tickCount++;\n        if (this.distributorsInfo[j].selected == false) unTickCount++;\n      }\n      if (tickCount == ArrLength) {\n        //二级全勾选\n        this.ischeckAll = true;\n        this.indeterminate = false;\n      } else if (unTickCount == ArrLength) {\n        //二级全不勾选\n        this.ischeckAll = false;\n        this.indeterminate = false;\n      } else {\n        this.ischeckAll = false;\n        this.indeterminate = true; //添加一级不确定状态\n      }\n    },\n  },\n  watch: {},\n};\n</script>\n<style lang=\"scss\" scoped>\n.deliverySetting {\n  padding: 20px 0;\n  position: relative;\n  .el-table {\n    thead {\n      tr {\n        th {\n          font-size: 14px;\n        }\n      }\n    }\n    tbody {\n      tr {\n        td {\n          vertical-align: baseline;\n          p {\n            line-height: 30px;\n          }\n          .el-checkbox-group {\n            display: flex;\n            flex-direction: column;\n            label {\n              line-height: 30px;\n              margin-left: 0;\n            }\n          }\n        }\n      }\n    }\n  }\n  .deliverySetting-table {\n    font-size: 14px;\n    color: #333;\n    .table-head,\n    .table-body {\n      display: flex;\n      padding: 10px 0;\n      .selection {\n        width: 45px;\n        text-align: center;\n        line-height: 36px;\n      }\n      .width185 {\n        width: 185px;\n      }\n      .width265 {\n        width: 265px;\n      }\n    }\n    .table-head {\n      height: 36px;\n      align-items: center;\n      background-color: #e7f2ff;\n    }\n    .table-body {\n      border-bottom: 1px solid #e4e4e4;\n      color: #666;\n      &:hover {\n        background-color: #f5f7fa;\n      }\n      .width265 {\n        display: flex;\n        flex-direction: column;\n        label {\n          line-height: 30px;\n          margin-left: 0;\n          color: #666;\n        }\n      }\n      p {\n        line-height: 30px;\n      }\n    }\n  }\n  .deliverySetting-btn {\n    /*width: 100%;*/\n    height: 59px;\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    position: absolute;\n    top: -55px;\n    right: -16px;\n    z-index: 100;\n    .tabs-btn {\n      min-width: 90px;\n      height: 34px;\n      line-height: 32px;\n      padding: 0 10px;\n      color: #2387f7;\n      border: solid 1px #4fa2ff;\n      background-color: #e7f2ff;\n      cursor: pointer;\n      &:nth-of-type(2) {\n        margin: 0 15px;\n      }\n      input {\n        border: none;\n        background: transparent;\n        color: inherit;\n        cursor: inherit;\n        outline: none;\n        margin: 0;\n        padding: 0;\n      }\n      &:hover {\n        color: #fff;\n        background-color: #2387f7;\n      }\n    }\n  }\n  .setDistributorDailog {\n    .el-input {\n      width: 270px;\n    }\n  }\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/pms/poalDel.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"deliverySetting\"},[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",staticStyle:{\"display\":\"flex\",\"align-items\":\"center\",\"justify-content\":\"space-between\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"权限修改\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.changePms}},[_vm._v(\"立即修改\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"deliverySetting-table\"},[_c('el-checkbox-group',{model:{value:(_vm.checkList),callback:function ($$v) {_vm.checkList=$$v},expression:\"checkList\"}},_vm._l((_vm.distributorsInfo),function(partition,partitionIndex){return _c('div',{key:partitionIndex,staticClass:\"table-body\"},[_c('div',{staticClass:\"selection\"},[_c('el-checkbox',{key:partitionIndex,attrs:{\"label\":partition.id},on:{\"change\":function($event){return _vm.handleCheckedCountryAllChange(partitionIndex,partition.partitionId,$event)}}},[_vm._v(_vm._s(partition.permissionName))])],1),_vm._v(\" \"),_c('div',{staticClass:\"width185\"},[_c('p',[_vm._v(_vm._s(partition.permissionName))])]),_vm._v(\" \"),_c('div',{staticClass:\"width265\"},_vm._l((partition.rolePermissionVOList),function(country,countryIdx){return _c('el-checkbox',{key:countryIdx,attrs:{\"label\":country.id},on:{\"change\":function($event){return _vm.handleCheckedCountryChange(partitionIndex,country.id,partition.partitionId,$event)}}},[_vm._v(_vm._s(country.permissionName))])}),1)])}),0)],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-59885744\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/pms/poalDel.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-59885744\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./poalDel.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./poalDel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./poalDel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-59885744\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./poalDel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-59885744\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/pms/poalDel.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}