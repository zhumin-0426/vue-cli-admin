webpackJsonp([30],{"5Pql":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("O2NY"),s=t.n(a),p={data:function(){return{ruleForm:{usersId:"",xAppId:"",xAppSecret:"",gzAppId:"",gzAppSecret:"",mchId:"",wxKey:"",paths:""},rules:{usersId:[{required:!0,message:"请设置用户id",trigger:"blur"}],gzAppId:[{required:!0,message:"请设置公众号appid",trigger:"blur"}],gzAppSecret:[{required:!0,message:"请设置公众号secret",trigger:"blur"}],mchId:[{required:!0,message:"请设置商户号",trigger:"blur"}],wxKey:[{required:!0,message:"请设置kay",trigger:"blur"}],paths:[{required:!0,message:"请上传paths文件",trigger:"blur"}]}}},created:function(){this.originData(),this.ruleForm.usersId=localStorage.getItem("uid")},methods:{originData:function(){var e=this,r=this.$route.query.id,t=new URLSearchParams;t.append("id",r),this.$http.post(this.$api.changeOriginAppData.changeOriginAppData,t,!0).then(function(r){"success"==r.data.state&&(e.ruleForm.usersId=r.data.getUsersDateVO.usersId,e.ruleForm.xAppId=r.data.getUsersDateVO.xAppId,e.ruleForm.xAppSecret=r.data.getUsersDateVO.xAppSecret,e.ruleForm.gzAppId=r.data.getUsersDateVO.gzAppId,e.ruleForm.gzAppSecret=r.data.getUsersDateVO.gzAppSecret,e.ruleForm.mchId=r.data.getUsersDateVO.mchId,e.ruleForm.wxKey=r.data.getUsersDateVO.wxKey,e.ruleForm.paths=r.data.getUsersDateVO.paths)})},resetForm:function(e){this.$refs[e].resetFields()},handleFileChange:function(){var e=this,r=this.$refs.inputer;this.file=r.files[0];Math.floor(this.file.size/1024);this.formData=new FormData,this.formData.append("file",this.file),this.$http.post(this.$api.uploadAppFile.uploadAppFile,this.formData,!0).then(function(r){"success"==r.data.state&&(s.a.errPrompt(e.$message({message:"恭喜你，文件添加成功",type:"success"})),e.ruleForm.paths=r.data.url)})},submitForm:function(e){var r=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;console.log("aa");var t=r.$route.query.id,a=new URLSearchParams;a.append("id",t),a.append("uid",localStorage.getItem("uid")),a.append("usersId",r.ruleForm.usersId),a.append("xAppId",r.ruleForm.xAppId),a.append("xAppSecret",r.ruleForm.xAppSecret),a.append("gzAppId",r.ruleForm.gzAppId),a.append("gzAppSecret",r.ruleForm.gzAppSecret),a.append("mchId",r.ruleForm.mchId),a.append("wxKey",r.ruleForm.wxKey),a.append("paths",r.ruleForm.paths),r.$http.post(r.$api.changeAppMsg.changeAppMsg,a,!0).then(function(e){console.log("修改数据",e),"success"==e.data.state&&(s.a.errPrompt(r.$message({message:"恭喜你，应用数据修改成功",type:"success"})),r.$router.push({path:"/user/appmsg"}))})})}}},l={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"changeAppMsg"},[t("el-card",{staticClass:"addappmsg-card"},[t("div",{staticClass:"tip"},[t("div",{staticClass:"title"},[t("div",{staticClass:"line"}),e._v(" "),t("div",{staticClass:"txt"},[e._v("添加应用数据")])])]),e._v(" "),t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"250px"}},[t("el-form-item",{attrs:{label:"用户id",prop:"usersId"}},[t("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.usersId,callback:function(r){e.$set(e.ruleForm,"usersId",r)},expression:"ruleForm.usersId"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"小程序id",prop:"xAppId"}},[t("el-input",{attrs:{placeholder:"请输入小程序id"},model:{value:e.ruleForm.xAppId,callback:function(r){e.$set(e.ruleForm,"xAppId",r)},expression:"ruleForm.xAppId"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"小程序secret",prop:"xAppSecret"}},[t("el-input",{attrs:{placeholder:"请输入小程序secret"},model:{value:e.ruleForm.xAppSecret,callback:function(r){e.$set(e.ruleForm,"xAppSecret",r)},expression:"ruleForm.xAppSecret"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"公众号id",prop:"gzAppId"}},[t("el-input",{attrs:{placeholder:"请输入公众号id"},model:{value:e.ruleForm.gzAppId,callback:function(r){e.$set(e.ruleForm,"gzAppId",r)},expression:"ruleForm.gzAppId"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"公众号secret",prop:"gzAppSecret"}},[t("el-input",{attrs:{placeholder:"请输入公众号secret"},model:{value:e.ruleForm.gzAppSecret,callback:function(r){e.$set(e.ruleForm,"gzAppSecret",r)},expression:"ruleForm.gzAppSecret"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"商户号",prop:"mchId"}},[t("el-input",{attrs:{placeholder:"请输入商户号"},model:{value:e.ruleForm.mchId,callback:function(r){e.$set(e.ruleForm,"mchId",r)},expression:"ruleForm.mchId"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"kay",prop:"wxKey"}},[t("el-input",{attrs:{placeholder:"请输入kay"},model:{value:e.ruleForm.wxKey,callback:function(r){e.$set(e.ruleForm,"wxKey",r)},expression:"ruleForm.wxKey"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"paths文件",prop:"paths"}},[t("el-input",{attrs:{placeholder:"请上传文件"},model:{value:e.ruleForm.paths,callback:function(r){e.$set(e.ruleForm,"paths",r)},expression:"ruleForm.paths"}},[t("template",{slot:"append"},[t("div",{staticClass:"btn"},[t("el-button",{attrs:{type:"info"}},[e._v("选择文件")]),e._v(" "),t("input",{ref:"inputer",attrs:{type:"file",name:"sharePic"},on:{change:e.handleFileChange}})],1)])],2)],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("立即修改")]),e._v(" "),t("el-button",{on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]};var o=t("C7Lr")(p,l,!1,function(e){t("62Y4")},"data-v-4a461444",null);r.default=o.exports},"62Y4":function(e,r){}});
//# sourceMappingURL=30.99fc3a25d6f40900ce61.js.map